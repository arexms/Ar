language: cpp
compiler: gcc
install:
  - if [ "$CXX" = "g++" ]; then export CXX="g++-5" CC="gcc-5"; fi
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
      - gcc-5
      - g++-5
before_script:
  - ls
  - $CXX -v
  - sudo apt-get update -qq
  - sudo apt-get install libboost-system-dev
  - wget https://github.com/google/protobuf/releases/download/v3.0.0/protobuf-cpp-3.0.0.tar.gz
  - tar xvfz protobuf-cpp-3.0.0.tar.gz
  - ( cd protobuf-3.0.0 && ./configure --prefix=$HOME/protobuf-3.0.0-bin && make -j2 && make install )
  - PATH=$PATH:$HOME/protobuf-3.0.0-bin/bin
  - PROTOC_PATH=$HOME/protobuf-3.0.0-bin/
  - wget https://github.com/google/googletest/archive/release-1.8.0.tar.gz
  - tar xzf release-1.8.0.tar.gz
  - ln -s googletest-release-1.8.0/googletest googletest
  - ln -s googletest-release-1.8.0/googlemock googlemock
script:
- cd build
- cmake ../ -DPROTOC_PATH=$PROTOC_PATH && make VERBOSE=yes
- cd ..
